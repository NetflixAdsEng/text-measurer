parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"GSOu":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=.2,a=["fontFamily","fontWeight","fontSize"],h=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.fontFamily,a=void 0===n?"Times":n,h=i.fontWeight,o=void 0===h?"normal":h,r=i.fontSize,s=void 0===r?200:r,c=i._centerText,u=void 0!==c&&c,f=i.canvasHeight,l=i._bgColor,v=i._textColor;t(this,e),this._queueRecalc=!0,this._center=0,this.fontFamily=a,this.fontWeight=o,this.canvasHeight=f,this.fontSize=parseInt(s,10),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.text="",this._centerText=u,this._bgColor=l,this._textColor=v,this._initializeCanvas(this.text)}return i(e,[{key:"updateFont",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=Object.keys(e).filter(function(t){return a.includes(t)});i.length&&(i.forEach(function(i){e[i]&&(t[i]=e[i])}),this.context.font="".concat(this.fontWeight," ").concat(this.fontSize,"px ").concat(this.fontFamily))}},{key:"_initializeCanvas",value:function(t){this.canvas.width=this.fontSize*t.length;var e=Math.round(n*this.fontSize),i=this.fontSize+2*e;this.canvasHeight&&this.canvasHeight>=i?(this.canvas.height=this.canvasHeight,this.pad=Math.round((this.canvasHeight-this.fontSize)/2)):(this.pad=e,this.canvas.height=i),this._center=this.canvas.height/2,this.context.font="".concat(this.fontWeight," ").concat(this.fontSize,"px ").concat(this.fontFamily),this.context.textBaseline="top",this.context.textAlign="center"}},{key:"getCenterOfText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.centerText,n=void 0!==i&&i,a=e.useCenterOfMass,h=void 0===a||a,o=e.usePerChar,r=void 0!==o&&o,u=this.canvas,f=this.context;this.text=t||this.text,this._initializeCanvas(this.text);var l,v=h?s:c;r?l=this.getAvgOfPerLetterMedian(this.text,v):(f.fillText(this.text,Math.round(u.width/2),this.pad,u.width),l=v(f.getImageData(0,0,u.width,u.height)));if(this._center=l.center,this._topY=l.topY,this._bottomY=l.bottomY,this._queueRecalc=!1,n||this._bgColor||this._textColor){var d=n?u.height/2-this._center:0;this._bgColor?(f.fillStyle=this._bgColor,f.fillRect(0,0,u.width,u.height)):f.clearRect(0,0,u.width,u.height),this._textColor&&(f.fillStyle=this._textColor),f.fillText(this.text,Math.round(u.width/2),this.pad+d,u.width)}return this._center}},{key:"getVerticalPoints",value:function(){return{top:this._topY-this.pad,bottom:this._bottomY-this.pad}}},{key:"getCenteringOffset",value:function(t,e){var i=this.getCenterOfText(t,e);context.fillText(this.text,Math.round(canvas.width/2),this.pad,canvas.width),this._imageData=context.getImageData(0,0,canvas.width,canvas.height);(useCenterOfMass?s:c)(this._imageData);return this.canvas.height/2-i}},{key:"getCenterHeightPercentage",value:function(t,e){var i=this.getCenterOfText(t,e),n=this.pad;return(i-n)/(this.canvas.height-this.pad-n)}},{key:"getAvgOfPerLetterMedian",value:function(t,e){var i=this,n=Array.prototype.filter.call(t,function(t){return!/\s/.test(t)}).map(function(t){i._initializeCanvas(t),i.context.fillText(t,Math.round(i.canvas.width/2),i.pad,i.canvas.width);var n=i.context.getImageData(0,0,i.canvas.width,i.canvas.height),a=e(n);return a.width=i.canvas.width,a});console.log("centerResultsPerChar",n),this._initializeCanvas(t);var a=o(n.map(function(t){return t.width}));return{center:o(n.map(function(t){return t.center*t.width}))/a,topY:n.reduce(function(t,e){return Math.min(t,e.top)},1/0),bottomY:n.reduce(function(t,e){return Math.max(t,e.bottom)},-1/0)}}}]),e}();function o(t){return t.reduce(function(t,e){return t+e})}function r(t){return o(t)/t.length}function s(t){for(var e,i=t.data,n=(t.height,4*t.width),a=0,h=0,o=3,r=i.length;o<r;o+=4){var s=Math.floor(o/n),c=i[o];c>0&&(void 0===e&&(e=s),h+=c*(s+.5),a+=c)}return void 0===e&&(e=0),{center:h/a,bottomY:u(t),topY:e}}function c(t){for(var e=t.data,i=(t.height,4*t.width),n=0,a=3,h=e.length;a<h;a+=4){var o=Math.floor(a/i);if(e[a]>0){n=o;break}}var r=u(t);return{center:Math.round((n+r)/2),bottomY:r,topY:n}}function u(t){for(var e=t.data,i=t.height,n=4*t.width,a=e.length-1;a>0;a-=4){var h=Math.floor(a/n);if(e[a]>0)return h}return i-1}var f=h;exports.default=f;
},{}]},{},["GSOu"], "TextMeasurer")
//# sourceMappingURL=/TextMeasurer.min.map